import {
  F,
  k,
  l,
  y
} from "./chunk-TWBIS6VY.js";

// node_modules/preact-render-to-string/dist/index.module.js
var o = /[\s\n\\/='"\0<>]/;
var n = /^xlink:?./;
var a = /["&<]/;
function i(e) {
  if (0 === e.length || false === a.test(e))
    return e;
  for (var t = 0, r = 0, o2 = "", n2 = ""; r < e.length; r++) {
    switch (e.charCodeAt(r)) {
      case 34:
        n2 = "&quot;";
        break;
      case 38:
        n2 = "&amp;";
        break;
      case 60:
        n2 = "&lt;";
        break;
      default:
        continue;
    }
    r !== t && (o2 += e.slice(t, r)), o2 += n2, t = r + 1;
  }
  return r !== t && (o2 += e.slice(t, r)), o2;
}
var l2 = {};
var c = /* @__PURE__ */ new Set(["animation-iteration-count", "border-image-outset", "border-image-slice", "border-image-width", "box-flex", "box-flex-group", "box-ordinal-group", "column-count", "fill-opacity", "flex", "flex-grow", "flex-negative", "flex-order", "flex-positive", "flex-shrink", "flood-opacity", "font-weight", "grid-column", "grid-row", "line-clamp", "line-height", "opacity", "order", "orphans", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-miterlimit", "stroke-opacity", "stroke-width", "tab-size", "widows", "z-index", "zoom"]);
var s = /[A-Z]/g;
function _(e) {
  var t = "";
  for (var r in e) {
    var o2 = e[r];
    if (null != o2 && "" !== o2) {
      var n2 = "-" == r[0] ? r : l2[r] || (l2[r] = r.replace(s, "-$&").toLowerCase()), a2 = ";";
      "number" != typeof o2 || n2.startsWith("--") || c.has(n2) || (a2 = "px;"), t = t + n2 + ":" + o2 + a2;
    }
  }
  return t || void 0;
}
var u;
var p;
var d;
var f;
var v = [];
var h = Array.isArray;
var m = Object.assign;
function y2(o2, n2) {
  var a2 = l.__s;
  l.__s = true, u = l.__b, p = l.diffed, d = l.__r, f = l.unmount;
  var i2 = y(k, null);
  i2.__k = [o2];
  try {
    return x(o2, n2 || k2, false, void 0, i2);
  } finally {
    l.__c && l.__c(o2, v), l.__s = a2, v.length = 0;
  }
}
function g() {
  this.__d = true;
}
var k2 = {};
function b(e, t) {
  var r, o2 = e.type, n2 = true;
  return e.__c ? (n2 = false, (r = e.__c).state = r.__s) : r = new o2(e.props, t), e.__c = r, r.__v = e, r.props = e.props, r.context = t, r.__d = true, null == r.state && (r.state = k2), null == r.__s && (r.__s = r.state), o2.getDerivedStateFromProps ? r.state = m({}, r.state, o2.getDerivedStateFromProps(r.props, r.state)) : n2 && r.componentWillMount ? (r.componentWillMount(), r.state = r.__s !== r.state ? r.__s : r.state) : !n2 && r.componentWillUpdate && r.componentWillUpdate(), d && d(e), r.render(r.props, r.state, t);
}
function x(t, a2, l3, c2, s2) {
  if (null == t || true === t || false === t || "" === t)
    return "";
  if ("object" != typeof t)
    return "function" == typeof t ? "" : i(t + "");
  if (h(t)) {
    var v2 = "";
    s2.__k = t;
    for (var y3 = 0; y3 < t.length; y3++) {
      var k3 = t[y3];
      null != k3 && "boolean" != typeof k3 && (v2 += x(k3, a2, l3, c2, s2));
    }
    return v2;
  }
  if (void 0 !== t.constructor)
    return "";
  t.__ = s2, u && u(t);
  var S, D, A, E = t.type, F2 = t.props, L = a2;
  if ("function" == typeof E) {
    if (E === k) {
      if (F2.UNSTABLE_comment)
        return "<!--" + i(F2.UNSTABLE_comment || "") + "-->";
      D = F2.children;
    } else {
      if (null != (S = E.contextType)) {
        var T = a2[S.__c];
        L = T ? T.props.value : S.__;
      }
      if (E.prototype && "function" == typeof E.prototype.render)
        D = b(t, L), A = t.__c;
      else {
        t.__c = A = { __v: t, props: F2, context: L, setState: g, forceUpdate: g, __d: true, __h: [] };
        for (var U = 0; A.__d && U++ < 25; )
          A.__d = false, d && d(t), D = E.call(A, F2, L);
        A.__d = true;
      }
      if (null != A.getChildContext && (a2 = m({}, a2, A.getChildContext())), (E.getDerivedStateFromError || A.componentDidCatch) && l.errorBoundaries) {
        var W = "";
        D = null != D && D.type === k && null == D.key ? D.props.children : D;
        try {
          return W = x(D, a2, l3, c2, t);
        } catch (e) {
          return E.getDerivedStateFromError && (A.__s = E.getDerivedStateFromError(e)), A.componentDidCatch && A.componentDidCatch(e, {}), A.__d && (D = b(t, a2), null != (A = t.__c).getChildContext && (a2 = m({}, a2, A.getChildContext())), W = x(D = null != D && D.type === k && null == D.key ? D.props.children : D, a2, l3, c2, t)), W;
        } finally {
          p && p(t), t.__ = void 0, f && f(t);
        }
      }
    }
    var j = x(D = null != D && D.type === k && null == D.key ? D.props.children : D, a2, l3, c2, t);
    return p && p(t), t.__ = void 0, f && f(t), j;
  }
  var M, z = "<" + E, B = "";
  for (var N in F2) {
    var H = F2[N];
    switch (N) {
      case "children":
        M = H;
        continue;
      case "key":
      case "ref":
      case "__self":
      case "__source":
        continue;
      case "htmlFor":
        if ("for" in F2)
          continue;
        N = "for";
        break;
      case "className":
        if ("class" in F2)
          continue;
        N = "class";
        break;
      case "defaultChecked":
        N = "checked";
        break;
      case "defaultSelected":
        N = "selected";
        break;
      case "defaultValue":
      case "value":
        switch (N = "value", E) {
          case "textarea":
            M = H;
            continue;
          case "select":
            c2 = H;
            continue;
          case "option":
            c2 != H || "selected" in F2 || (z += " selected");
        }
        break;
      case "dangerouslySetInnerHTML":
        B = H && H.__html;
        continue;
      case "style":
        "object" == typeof H && (H = _(H));
        break;
      default:
        if (l3 && n.test(N))
          N = N.toLowerCase().replace(w, "xlink:");
        else {
          if (o.test(N))
            continue;
          "-" !== N[4] && "draggable" !== N || null == H || (H += "");
        }
    }
    null != H && false !== H && "function" != typeof H && (z = true === H || "" === H ? z + " " + N : z + " " + N + '="' + i(H + "") + '"');
  }
  if (o.test(E))
    throw new Error(E + " is not a valid HTML tag name in " + z + ">");
  return B || ("string" == typeof M ? B = i(M) : null != M && false !== M && true !== M && (B = x(M, a2, "svg" === E || "foreignObject" !== E && l3, c2, t))), p && p(t), t.__ = void 0, f && f(t), !B && C.has(E) ? z + "/>" : z + ">" + B + "</" + E + ">";
}
var w = /^xlink:?/;
var C = /* @__PURE__ */ new Set(["area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"]);
var index_module_default = y2;

// node_modules/preact-iso/prerender.js
var vnodeHook;
var old = l.vnode;
l.vnode = (vnode) => {
  if (old)
    old(vnode);
  if (vnodeHook)
    vnodeHook(vnode);
};
async function prerender(vnode, options) {
  options = options || {};
  const maxDepth = options.maxDepth || 10;
  const props = options.props;
  let tries = 0;
  if (typeof vnode === "function") {
    vnode = y(vnode, props);
  } else if (props) {
    vnode = F(vnode, props);
  }
  const render = () => {
    if (++tries > maxDepth)
      return;
    try {
      return index_module_default(vnode);
    } catch (e) {
      if (e && e.then)
        return e.then(render);
      throw e;
    }
  };
  let links = /* @__PURE__ */ new Set();
  vnodeHook = ({ type, props: props2 }) => {
    if (type === "a" && props2 && props2.href && (!props2.target || props2.target === "_self")) {
      links.add(props2.href);
    }
  };
  try {
    let html = await render();
    html += `<script type="isodata"><\/script>`;
    return { html, links };
  } finally {
    vnodeHook = null;
  }
}
export {
  prerender as default
};
//# sourceMappingURL=prerender-LDJMSHVU.js.map
