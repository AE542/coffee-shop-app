var e=require("@preact/signals-core"),n=require("react"),r=require("use-sync-external-store/shim/index.js"),t=require("react/jsx-runtime"),u=require("react/jsx-dev-runtime");function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var f=/*#__PURE__*/i(n),o=/*#__PURE__*/i(t),c=/*#__PURE__*/i(u),a=null,l=!1,s=null,v=new Map;function p(e){if(!e)return 1;var n,r=v.get(e);if(void 0!==r)return r;var t=e.useCallback.toString();if(e.useReducer===e.useEffect)n=1;else if(e.useEffect===e.useImperativeHandle)n=32;else if(/Invalid/.test(t))n=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var u=e.useReducer.toString();if(/rerenderReducer/.test(u)||/return\s*\[\w+,/.test(u))n=16;else n=8}else n=4;v.set(e,n);return n}var d,b=[],x=Symbol.for("react.element");function g(n){if("function"!=typeof n)return n;else return function(r,t){if("string"==typeof r&&t)for(var u in t){var i=t[u];if("children"!==u&&i instanceof e.Signal)t[u]=i.value}return n.call.apply(n,[n,r,t].concat([].slice.call(arguments,2)))}}function y(e){if(d)d();d=e&&e.S()}var j=function(){return y()};function h(){var t=n.useRef();if(null==t.current)t.current=function(){var n,r,t=0,u=e.effect(function(){n=this});n.c=function(){t=t+1|0;if(r)r()};return{updater:n,subscribe:function(e){r=e;return function(){t=t+1|0;r=void 0;u()}},getSnapshot:function(){return t}}}();var u=t.current;r.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);y(u.updater);return j}Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:x},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});exports.installAutoSignalTracking=function(){Object.defineProperty(n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return s},set:function(e){if(!l){var n=p(s),r=p(e);s=e;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(n,r)){l=!0;a=h();l=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(n,r))null==a||a()}else s=e}});!function(){var e=o,n=c;f.createElement=g(f.createElement);n.jsx&&(n.jsx=g(n.jsx));e.jsx&&(e.jsx=g(e.jsx));n.jsxs&&(n.jsxs=g(n.jsxs));e.jsxs&&(e.jsxs=g(e.jsxs));n.jsxDEV&&(n.jsxDEV=g(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=g(e.jsxDEV))}()};exports.useComputed=function(r){var t=n.useRef(r);t.current=r;return n.useMemo(function(){return e.computed(function(){return t.current()})},b)};exports.useSignal=function(r){return n.useMemo(function(){return e.signal(r)},b)};exports.useSignalEffect=function(r){var t=n.useRef(r);t.current=r;n.useEffect(function(){return e.effect(function(){return t.current()})},b)};exports.useSignals=h;exports.wrapJsx=g;//# sourceMappingURL=runtime.js.map
