var e=require("@preact/signals-core"),r=require("react"),n=require("use-sync-external-store/shim/index.js"),t=require("react/jsx-runtime"),u=require("react/jsx-dev-runtime");function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var f=/*#__PURE__*/i(r),o=/*#__PURE__*/i(t),c=/*#__PURE__*/i(u),a=[],l=Symbol.for("react.element");Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:l},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var s,v=Symbol.for("react.element");function p(r){if("function"!=typeof r)return r;else return function(n,t){if("string"==typeof n&&t)for(var u in t){var i=t[u];if("children"!==u&&i instanceof e.Signal)t[u]=i.value}return r.call.apply(r,[r,n,t].concat([].slice.call(arguments,2)))}}function b(e){if(s)s();s=e&&e.S()}var g=function(){return b()};Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:v},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var d=null,x=!1,y=null,j=new Map;function m(e){if(!e)return 1;var r,n=j.get(e);if(void 0!==n)return n;var t=e.useCallback.toString();if(e.useReducer===e.useEffect)r=1;else if(e.useEffect===e.useImperativeHandle)r=32;else if(/Invalid/.test(t))r=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var u=e.useReducer.toString();if(/rerenderReducer/.test(u)||/return\s*\[\w+,/.test(u))r=16;else r=8}else r=4;j.set(e,r);return r}!function(){Object.defineProperty(r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return y},set:function(t){if(!x){var u=m(y),i=m(t);y=t;if(function(e,r){if(1&e&&28&r)return!0;else if(2&e||2&r)return!1;else if(16&r)return!0;else return!1}(u,i)){x=!0;d=function(){var t=r.useRef();if(null==t.current)t.current=function(){var r,n,t=0,u=e.effect(function(){r=this});r.c=function(){t=t+1|0;if(n)n()};return{updater:r,subscribe:function(e){n=e;return function(){t=t+1|0;n=void 0;u()}},getSnapshot:function(){return t}}}();var u=t.current;n.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);b(u.updater);return g}();x=!1}else if(function(e,r){return Boolean(28&e&&1&r)}(u,i))null==d||d()}else y=t}});!function(){var e=o,r=c;f.createElement=p(f.createElement);r.jsx&&(r.jsx=p(r.jsx));e.jsx&&(e.jsx=p(e.jsx));r.jsxs&&(r.jsxs=p(r.jsxs));e.jsxs&&(e.jsxs=p(e.jsxs));r.jsxDEV&&(r.jsxDEV=p(r.jsxDEV));e.jsxDEV&&(e.jsxDEV=p(e.jsxDEV))}()}();exports.Signal=e.Signal;exports.batch=e.batch;exports.computed=e.computed;exports.effect=e.effect;exports.signal=e.signal;exports.useComputed=function(n){var t=r.useRef(n);t.current=n;return r.useMemo(function(){return e.computed(function(){return t.current()})},a)};exports.useSignal=function(n){return r.useMemo(function(){return e.signal(n)},a)};exports.useSignalEffect=function(n){var t=r.useRef(n);t.current=n;r.useEffect(function(){return e.effect(function(){return t.current()})},a)};//# sourceMappingURL=signals.js.map
